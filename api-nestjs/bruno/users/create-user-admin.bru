meta {
  name: Create User (Admin Only)
  type: http
  seq: 5
}

post {
  url: {{host}}/users
  body: json
  auth: none
}

headers {
  Authorization: Bearer {{token}}
}

docs {
  # Cria√ß√£o de Usu√°rio (Administrativo)

  Endpoint **restrito a administradores** para criar usu√°rios com privil√©gios avan√ßados.

  ## ‚ö†Ô∏è IMPORTANTE
  - **Acesso**: Apenas usu√°rios com role ADMIN
  - **Autentica√ß√£o**: Token JWT obrigat√≥rio
  - **Autoriza√ß√£o**: Verifica√ß√£o de role ADMIN
  - **Auditoria**: Todas as cria√ß√µes s√£o registradas no audit trail

  ## Diferen√ßas do Registro P√∫blico
  
  | Recurso | Registro P√∫blico (`/auth/register`) | Cria√ß√£o Admin (`/users`) |
  |---------|-------------------------------------|--------------------------|
  | **Acesso** | P√∫blico | Apenas ADMIN |
  | **Role** | Sempre USER | Qualquer role |
  | **Ativa√ß√£o** | Email obrigat√≥rio | Opcional |
  | **Status** | Sempre inativo | Configur√°vel |
  | **Valida√ß√µes** | B√°sicas | Avan√ßadas |
  | **Auditoria** | Limitada | Completa |

  ## Campos Obrigat√≥rios:
  - **userName**: Nome de usu√°rio √∫nico (3-30 caracteres)
  - **name**: Nome completo (2-100 caracteres)
  - **email**: Email v√°lido e √∫nico
  - **password**: Senha forte (m√≠nimo 8 caracteres)

  ## Campos Opcionais:
  - **cpf**: CPF v√°lido (formato brasileiro)
  - **telefone**: Telefone no formato brasileiro
  - **avatarUrl**: URL v√°lida para avatar
  - **role**: Role do usu√°rio (USER, FUNCIONARIO, GERENTE, ADMIN, SUPERADMIN)
  - **active**: Status de ativa√ß√£o (padr√£o: true)
  - **sendEmail**: Enviar email de ativa√ß√£o (padr√£o: false)
  - **blocked**: Status de bloqueio (padr√£o: false)
  - **blockedUntil**: Data limite do bloqueio

  ## Recursos Administrativos:
  - ‚úÖ Cria√ß√£o com qualquer role
  - ‚úÖ Ativa√ß√£o imediata opcional
  - ‚úÖ Controle de bloqueio
  - ‚úÖ Bypass de valida√ß√µes de email
  - ‚úÖ Auditoria completa

  ## Resposta de Sucesso (201):
  ```json
  {
    "data": {
      "userId": "uuid",
      "userName": "admin_user",
      "name": "Admin User",
      "email": "admin@company.com",
      "role": "ADMIN",
      "active": true,
      "blocked": false,
      "createdAt": "2024-01-01T00:00:00.000Z"
    },
    "message": "Usu√°rio criado com sucesso pelo administrador"
  }
  ```

  ## Poss√≠veis Erros:
  - **400**: Dados inv√°lidos fornecidos
  - **401**: Token JWT ausente ou inv√°lido
  - **403**: Acesso negado - apenas administradores
  - **409**: Conflito - usu√°rio j√° existe (email, username ou CPF)

  ## Seguran√ßa:
  - üîí Guard de autentica√ß√£o JWT
  - üõ°Ô∏è Guard de autoriza√ß√£o ADMIN
  - üìù Registro completo no audit trail
  - üö´ Preven√ß√£o de escala√ß√£o de privil√©gios
  - ‚ö° Rate limiting aplicado

  ## Exemplo de Uso:
  1. Fa√ßa login como administrador
  2. Use o token retornado no header Authorization
  3. Envie os dados do usu√°rio no body
  4. Verifique a resposta e logs de auditoria
}

body:json {
  {
    "userName": "novo_funcionario",
    "name": "Jo√£o Silva",
    "email": "joao.silva@empresa.com",
    "password": "SenhaSegura@123",
    "cpf": "123.456.789-00",
    "telefone": "(11) 99999-9999",
    "role": "FUNCIONARIO",
    "active": true,
    "sendEmail": false,
    "blocked": false
  }
}