<div class="container">
  <div class="card">
    <div class="card-header">
      <h2>Conexão WhatsApp</h2>
    </div>
    <div class="card-content">
      <!-- Estado de Loading -->
      <div *ngIf="isLoading" class="status-container">
        <i class="pi pi-spin pi-spinner loading-icon"></i>
        <p>Inicializando WhatsApp...</p>
      </div>

      <!-- Estado de Erro -->
      <div *ngIf="error && !isLoading" class="status-container error">
        <i class="pi pi-exclamation-triangle error-icon"></i>
        <p>{{ error }}</p>
        <button class="btn btn-primary" (click)="initializeInstance()">
          Tentar Novamente
        </button>
      </div>

      <!-- WhatsApp Conectado -->
      <div *ngIf="isConnected && !isLoading && !error" class="status-container success">
        <i class="pi pi-check-circle success-icon"></i>
        <p>WhatsApp está conectado!</p>
        <button class="btn btn-secondary" (click)="requestNewQrCode()">
          Desconectar e Gerar Novo QR
        </button>
      </div>

      <!-- QR Code Disponível -->
      <div *ngIf="!isConnected && qrCodeData && !isLoading && !error" class="status-container">
        <h3>Escaneie o QR Code</h3>
        <div class="qr-container">
          <qrcode [qrdata]="qrCodeData" [width]="256" [errorCorrectionLevel]="'M'"></qrcode>
        </div>
        <p>Escaneie este QR code com seu telefone para conectar.</p>
        <button class="btn btn-secondary" (click)="requestNewQrCode()">
          Gerar Novo QR Code
        </button>
      </div>

      <!-- Aguardando QR Code -->
      <div *ngIf="!isConnected && !qrCodeData && !isLoading && !error" class="status-container">
        <i class="pi pi-spin pi-spinner loading-icon"></i>
        <p>Aguardando QR code...</p>
        <button class="btn btn-primary" (click)="requestNewQrCode()">
          Solicitar QR Code
        </button>
      </div>
    </div>
  </div>
</div>
